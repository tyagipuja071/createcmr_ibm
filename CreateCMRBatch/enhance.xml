<!--
 Filename: enhance.xml
 Description: JPA Build-time enhancer of classes (for use in non-ui applications)
 Author: Jeffrey Zamor
 Date: Oct 08, 2014
-->
<project name="JPA Enhancer" default="create-enhanced-jar">
	
	<!-- Environment variables -->
	<property environment="env"/>
	
	
	<!-- App Variables -->
		
	<property name="web.classes" value="${basedir}/../RequestCMR/WebContent/WEB-INF/classes" />
	<property name="web.lib" value="${basedir}/../RequestCMR/WebContent/WEB-INF/lib" />
  <property name="batch.app" value="${basedir}/application" />
	<property name="batch.classes" value="${basedir}/bin" />
	<property name="batch.jar" value="application/CreateCMRBatch.jar" />
	
	
	<target name="create-enhanced-jar" depends="prepare-enhance">
		 <echo>Creating Enhanced Batch Jar</echo>
		 <jar destfile="application/CreateCMRBatch.jar">
		 	 <fileset dir="build"></fileset>
		 </jar>
<!--   <delete dir="build" /> -->
  </target>
	
	<target name="prepare-enhance">
		<echo>Creating Build Dir</echo>
    <delete dir="build" />
		<mkdir dir="build"/>
		<echo>Copying web and batch classes</echo>
		<copy todir="build">
      <fileset dir="${batch.classes}" includes="**/*.class" />
			 <fileset dir="${web.classes}" includes="**/*.class" />
       <fileset dir="${web.classes}" includes="**/*.properties" />
      <fileset dir="${web.classes}" includes="**/*.xml" />
		</copy>
	</target>

	<!--
	<target name="enhance-jpa" depends="prepare-enhance">
		<echo message="Classpath used for enhancer" />
		<echo message="  - ${cp}" />
		<taskdef name="openjpac" classname="${jpa.enhancer.class}">
			<classpath refid="enhance.cp" />
		</taskdef>
		<openjpac>
			<classpath refid="enhance.cp" />
		</openjpac>
		<echo message="JPA enhancement successfull" />
	</target>
	--> 
</project>